{"version":3,"sources":["../src/ptab.js"],"names":["require","request","base","PtabDocument","params","trial","PtabTrial","objects","filter","trialNumber","Model","documents","PtabManager","pageNumber","get","url","endpoint","qs","offset","json","hasOwnProperty","limit","getPage","page","metadata","count","Manager","PtabTrialManager","PtabDocumentManager","module","exports"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAAA,OAAO,CAAC,iBAAD,CAAP;;AACA,IAAMC,OAAO,GAAGD,OAAO,CAAC,wBAAD,CAAvB;;AACA,IAAME,IAAI,GAAGF,OAAO,CAAC,QAAD,CAApB;;IAEMG,Y;;;;;AACF,wBAAYC,MAAZ,EAAmB;AAAA;;AAAA;;AACf,sFAAMA,MAAN;AACA,UAAKC,KAAL,GAAaC,SAAS,CAACC,OAAV,CAAkBC,MAAlB,CAAyB,MAAKC,WAA9B,CAAb;AAFe;AAGlB;;;EAJsBP,IAAI,CAACQ,K;;AAK/B;;IACKJ,S;;;;;AACF,qBAAYF,MAAZ,EAAmB;AAAA;;AAAA;;AACf,oFAAMA,MAAN;AACA,WAAKO,SAAL,GAAiBR,YAAY,CAACI,OAAb,CAAqBC,MAArB,CAA4B,OAAKC,WAAjC,CAAjB;AAFe;AAGlB;;;EAJmBP,IAAI,CAACQ,K;;AAK5B;;IAEKE,W;;;;;;;;;;;;;;;;+CAEeC,U;;;;;;uBACAZ,OAAO,CAACa,GAAR,CAAY;AACrBC,kBAAAA,GAAG,EAAE,yCAAyC,KAAKC,QAD9B;AAErBC,kBAAAA,EAAE,oBAAO,KAAKb,MAAZ,EAAuB;AAACc,oBAAAA,MAAM,EAAEL,UAAU,GAAG;AAAtB,mBAAvB,CAFmB;AAGrBM,kBAAAA,IAAI,EAAE;AAHe,iBAAZ,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;qBAQT,KAAKf,MAAL,CAAYgB,cAAZ,CAA2B,OAA3B,C;;;;;kDACO,KAAKhB,MAAL,CAAYiB,K;;;AACtB;;uBACgB,KAAKC,OAAL,CAAa,CAAb,C;;;AAAbC,gBAAAA,I;kDACGA,IAAI,CAACC,QAAL,CAAcC,K;;;;;;;;;;;;;;;;;;;EAfHvB,IAAI,CAACwB,O;;IAmBzBC,gB;;;;;;;;;;;;;;;;;;oEACa,a;;gEACJ,Q;;kEACErB,S;;;;;;EAHcM,W;;IAMzBgB,mB;;;;;;;;;;;;;;;;;;oEACa,a;;gEACJ,W;;kEACEzB,Y;;;;;;EAHiBS,W;;AAOlCN,SAAS,CAACC,OAAV,GAAoB,IAAIoB,gBAAJ,CAAqB,EAArB,CAApB;AACAxB,YAAY,CAACI,OAAb,GAAuB,IAAIqB,mBAAJ,CAAwB,EAAxB,CAAvB;AAEAC,MAAM,CAACC,OAAP,GAAiB;AACbxB,EAAAA,SAAS,EAAEA,SADE;AAEbH,EAAAA,YAAY,EAAEA;AAFD,CAAjB","sourcesContent":["require(\"@babel/polyfill\")\nconst request = require('request-promise-native');\nconst base = require('./base')\n\nclass PtabDocument extends base.Model {\n    constructor(params){\n        super(params)\n        this.trial = PtabTrial.objects.filter(this.trialNumber)\n    }\n};\nclass PtabTrial extends base.Model {\n    constructor(params){\n        super(params)\n        this.documents = PtabDocument.objects.filter(this.trialNumber)\n    }\n};\n\nclass PtabManager extends base.Manager {\n\n    async fetchPage (pageNumber) {\n        return await request.get({\n            url: \"https://ptabdata.uspto.gov/ptab-api/\" + this.endpoint,\n            qs:  {...this.params, ...{offset: pageNumber * 25}},\n            json: true,\n        })\n    }\n\n    async length() {\n        if (this.params.hasOwnProperty('limit')) {\n            return this.params.limit;\n        };\n        let page = await this.getPage(0)\n        return page.metadata.count\n    }\n}\n\nclass PtabTrialManager extends PtabManager {\n    defaultQuery = \"trialNumber\"\n    endpoint = \"trials\"\n    modelClass = PtabTrial\n}\n\nclass PtabDocumentManager extends PtabManager {\n    defaultQuery = \"trialNumber\"\n    endpoint = \"documents\"\n    modelClass = PtabDocument\n}\n\n\nPtabTrial.objects = new PtabTrialManager({});\nPtabDocument.objects = new PtabDocumentManager({});\n\nmodule.exports = {\n    PtabTrial: PtabTrial,\n    PtabDocument: PtabDocument\n}"],"file":"ptab.js"}